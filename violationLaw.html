<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
  <title>18011499 임수빈</title>
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <!-- Create a div where the graph will take place -->
  <style>
      
body {
  font-family: 'Open Sans', sans-serif;
}

div#layout {
  text-align: center;
}

div#container {
  width: 1000px;
  height: 600px;
  margin: auto;
  background-color: #fff;
}

svg {
  width: 100%;
  height: 100%;
}

button{
  background-color: #2F4A6D;
  font-size:16px;
  padding: 10px 5px;
  border: none;
  color:#fff;
  display: inline-block;
}
button:hover{
  background-color:#FED966;
  color: #2F4A6D;
}
h3{
  color: #fff;
  text-align: center;
  padding-top: 30px;
  margin-bottom: 30px;
}
  </style>
</head>
<body>
  <body>
    <h2>사상자수가 10명 이상인 큰 사고의 특징</h2>
    <div>
      <button type="button" class="week" onClick="location.href='week.html'">요일</button>
      <button type="button" class="accKind" onClick="location.href='accKind.html'">사고 유형</button>
      <button type="button" class="dayAndNight" onClick="location.href='dayAndNight.html'">주야간</button>
      <button type="button" class="death" onClick="location.href='death.html'">사망자수</button>
      <button type="button" class="injuredPerson" onClick="location.href='injuredPerson.html'">부상자수</button>
      <button type="button" class="location" onClick="location.href='location.html'">발생지</button>
      <button type="button" class="perpetrator" onClick="location.href='perpetrator.html'">가해자</button>
      <button type="button" class="victim" onClick="location.href='victim.html'">피해자</button>
      <button type="button" class="roadKind" onClick="location.href='roadKind.html'">도로형태</button>
      <button type="button" class="violationLaw" onClick="location.href='violationLaw.html'">법규위반</button>
      <button type="button" class="hurtData" onClick="location.href='hurtData.html'">Parallel</button>
    </div>
    <div id='container'>
      <h3>위반된 법규별 사상자수가 10명 이상인 큰 사고 (%)</h3>
    </div>
    <script>
  
        var colorArr=['#FF9E9B','#32BEBE','#00BFFF','#228B22','#CC0000','#7F654C','#9D71BD','##F3B600'];
        var width = 500;
        var height = 500;
        var margin = 80;
  
        var arc = d3.arc()
          .innerRadius(0)
          .outerRadius(240)
          .cornerRadius(0)
         
        var pie = d3.pie()
                    .sort(null)
                    .value(function(d) { return d.Count; });
  
         var svg = d3.select("#container").append("svg")
            .attr("width",width)
            .attr("height",height)
            .attr("margin-left",10+'px');
  
         g = svg.append("g")
                     .attr("transform", "translate(" + width / 2 + "," + height/ 2 +")")
  
        d3.csv("Data/violationLaw.csv", function(data) {
    
         var arcs = pie(data);
         
         var pieChart = g.selectAll("path")
                  .data(arcs)
                  .enter();
             
              pieChart.append("path")
                  .style("fill", function(d,i){
                        var len=colorArr.length;
                        var idx=i%len;
                          return  d3.color(colorArr[idx]);
                             })
                  .attr("d", arc);
                                  
              pieChart.append("text")
                  .attr("class","pie")
                  .attr("transform", function(d) {
                        return "translate(" + arc.centroid(d) + ")";
                  })
                  .attr("fill","#ffffff")
                  .style("font-size",15+'px')
                  .style("text-anchor", "middle")
                  .text(function(d) { 
                        return d.data.violationLaw;
                  });
  });
  function type(d){
        d.Count=+d.Count;    
        return d;
  }
  </script> 
  </body>
</html>